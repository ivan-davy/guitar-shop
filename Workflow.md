# Workflow

### Установка npm-зависимостей:
```bash
npm install
```

## Сценарии

В `package.json` находятся несколько сценариев.

### Компиляция проекта

Создаст директорию `dist` и скомпилирует проект.

```bash
npm run compile
```

### Удаление скомпилированного проекта

Удаляет директорию `dist`. Используется перед компиляцией.

```bash
npm run clean
```

### Сборка проекта

Выполняет сборку проекта: удаляет ранее скомпилированный проект и компилирует заново.

```bash
npm run build
```


### Проверка линтером

Запуск проверки проекта статическим анализатором кода **ESLint**.
Линтер проверяет файлы только внутри директории `src`.
**Обратите внимание**, при запуске данной команды, ошибки выводятся в терминал.

```bash
npm run lint
```

### Запуск ts-модуля без компиляции

Пакет `ts-node` позволяет выполнить TS-код в Node.js без предварительной компиляции. Используется только на этапе разработки.

```bash
npm run ts -- <Путь к модулю с ts-кодом>
```


### Запуск mock-сервера

Запускает локальный сервер, с которого с помощью http-запроса возможно получить данные для последующей генерации mock-данных.

```bash
json-server mocks/mock-server-data.json --port 3123
```

### Запуск проекта

В процессе запуска проекта будет выполнен процесс «Сборки проекта» и запуска результирующего кода.

```bash
npm start
```


## CLI

Консольное приложение для генерации mock-данных.

### Команды

#### help

Выводит описание всех поддерживаемых команд. Команда --help также выполняется в случае, если не была указана иная команда.

```bash 
npm run ts ./src/cli.ts -- --help
```

### version

Выводит номер текущей версии CLI.

```bash 
npm run ts ./src/cli.ts -- --version
```

### generate

Генерирует указанное количество строк тестовых данных в TSV-файл по адресу path.
Данные для генерации запрашиваются по адресу url. Если файла по указанному path не существует, он будет создан.

```bash 
npm run ts ./src/cli.ts -- --generate <n> <path> <url>
```

Рабочий пример:
```bash
npm run ts ./src/cli.ts -- --generate 100 ./mocks/test-data.tsv http://localhost:3123/api
```
Сгенерирует 100 тестовых объектов в TSV-файле ./mocks/test.tsv на основе данных, запрошенных с http://localhost:3123/api


### import

Импортирует данные из TSV-файла, преобразуя текстовые строки в объекты.

```bash 
npm run ts ./src/cli.ts -- --import <path> <login> <password> <ip> <dbname> <salt>
```

Рабочий пример:
```bash 
npm run ts ./src/cli.ts -- --import ./mocks/test-data.tsv admin test 127.0.0.1 mongodb abcd1234
```
